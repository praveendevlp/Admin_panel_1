"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[93],{5093:(R,y,h)=>{h.r(y),h.d(y,{CategoryModule:()=>S});var a=h(6895),C=h(7136),k=h(5226),x=h.n(k),t=h(1571),A=h(7241),M=h(5830),D=h(388),T=h(433),d=h(8423),b=h(4333),e=h(502),o=h(4980);const r=["myModal1"],n=["myModal3"];function g(l,m){if(1&l&&(t.TgZ(0,"div",39)(1,"label"),t._uU(2),t.qZA()()),2&l){const i=t.oxw();t.xp6(2),t.Oqu(i.util.translate("No Data Found.."))}}function f(l,m){if(1&l&&(t.TgZ(0,"thead")(1,"tr")(2,"th"),t._uU(3),t.qZA(),t.TgZ(4,"th"),t._uU(5),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.qZA(),t.TgZ(8,"th"),t._uU(9),t.qZA()()()),2&l){const i=t.oxw();t.xp6(3),t.Oqu(i.util.translate("Id")),t.xp6(2),t.Oqu(i.util.translate("Name")),t.xp6(2),t.Oqu(i.util.translate("Store Name")),t.xp6(2),t.Oqu(i.util.translate("Action"))}}function v(l,m){1&l&&(t.TgZ(0,"td"),t._UZ(1,"ngx-skeleton-loader",40),t.qZA())}const _=function(){return[1,2,3,4]};function w(l,m){1&l&&(t.TgZ(0,"tr"),t.YNc(1,v,2,0,"td",15),t.qZA()),2&l&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,_)))}function B(l,m){if(1&l){const i=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"c-badge",41),t.NdJ("click",function(){const u=t.CHM(i).$implicit,p=t.oxw();return t.KtG(p.statusUpdate(u))}),t._uU(9),t.qZA(),t.TgZ(10,"c-badge",42),t.NdJ("click",function(){const u=t.CHM(i).$implicit,p=t.oxw();return t.KtG(p.updateInfo(u))}),t._uU(11),t.qZA(),t.TgZ(12,"c-badge",43),t.NdJ("click",function(){const u=t.CHM(i).$implicit,p=t.oxw();return t.KtG(p.deleteItem(u.id))}),t._uU(13),t.qZA()()()}if(2&l){const i=m.$implicit,s=t.oxw();t.xp6(2),t.hij("",i.id," "),t.xp6(2),t.Oqu(i.name),t.xp6(2),t.Oqu(i.store_name),t.xp6(2),t.Tol(1==i.status?"me-1 badge bg-success":"me-1 badge bg-dark"),t.Q6J("color",1==i.status?"success":"dark"),t.xp6(1),t.hij(" ",s.util.translate(1==i.status?"Active":"Deactived")," "),t.xp6(2),t.hij(" ",s.util.translate("Edit")," "),t.xp6(2),t.hij(" ",s.util.translate("Delete")," ")}}function O(l,m){if(1&l){const i=t.EpF();t.TgZ(0,"div")(1,"pagination-controls",44),t.NdJ("pageChange",function(c){t.CHM(i);const u=t.oxw();return t.KtG(u.page=c)}),t.qZA()()}}const E=function(l){return{id:"pagin1",itemsPerPage:10,currentPage:l}},I=function(){return{standalone:!0}},Z=[{path:"",component:(()=>{class l{constructor(i,s){this.util=i,this.api=s,this.list=[],this.dummy=[],this.dummyList=[],this.page=1,this.cateId="",this.name="",this.resetChanges=()=>{this.list=this.dummyList},this.getAll()}ngOnInit(){}getAll(){this.dummy=Array(5),this.list=[],this.api.get_private("v1/categories/getAll").then(i=>{console.log(i),this.dummy=[],i&&i.status&&200==i.status&&i.data&&(this.list=i.data,this.dummyList=i.data)},i=>{console.log(i),this.dummy=[],this.list=[],this.util.apiErrorHandler(i)}).catch(i=>{console.log(i),this.dummy=[],this.list=[],this.util.apiErrorHandler(i)})}importCSV(){this.myModal3.show()}saveType(){this.myModal3.hide()}uploadCSV(i){console.log("fle",i),0!=i.length&&null!=i[0].type.match(/text\/*/)&&(i?(console.log("ok"),this.util.show(),this.api.uploaCSV(i,"v1/categories/importData").subscribe(c=>{console.log("==>>>>>>",c.data),this.util.hide(),this.myModal3.hide(),this.util.success("Uploaded"),this.getAll()},c=>{console.log(c),this.util.hide(),this.util.apiErrorHandler(c)})):console.log("no"))}downloadSample(){window.open("assets/sample/categories.csv","_blank")}exportCSV(){let i=[];this.list.forEach(c=>{const u={id:this.util.replaceWithDot(c.id),name:this.util.replaceWithDot(c.name),restId:this.util.replaceWithDot(c.restId),extra_field:this.util.replaceWithDot(c.extra_field),status:this.util.replaceWithDot(c.status)};i.push(u)}),this.util.downloadFile(i,"categories",["id","name","restId","extra_field","status"])}search(i){this.resetChanges(),console.log("string",i),this.list=this.filterItems(i)}filterItems(i){return this.list.filter(s=>s.name.toLowerCase().indexOf(i.toLowerCase())>-1)}setFilteredItems(){console.log("clear"),this.list=[],this.list=this.dummyList}statusUpdate(i){console.log(i),x().fire({title:this.util.translate("Are you sure?"),text:this.util.translate("To update this item?"),icon:"question",showConfirmButton:!0,confirmButtonText:this.util.translate("Yes"),showCancelButton:!0,cancelButtonText:this.util.translate("Cancel"),backdrop:!1,background:"white"}).then(s=>{if(s&&s.value){console.log("update it");const c={id:i.id,status:0==i.status?1:0};this.util.show(),this.api.post_private("v1/categories/updateStatus",c).then(u=>{this.util.hide(),console.log("+++++++++++++++",u),u&&u.status&&200==u.status&&u.success&&(this.util.success(this.util.translate("Status Updated !")),this.getAll())},u=>{this.util.hide(),console.log("Error",u),this.util.apiErrorHandler(u)}).catch(u=>{this.util.hide(),console.log("Err",u),this.util.apiErrorHandler(u)})}})}deleteItem(i){console.log(i),x().fire({title:this.util.translate("Are you sure?"),text:this.util.translate("To delete this item?"),icon:"question",showConfirmButton:!0,confirmButtonText:this.util.translate("Yes"),showCancelButton:!0,cancelButtonText:this.util.translate("Cancel"),backdrop:!1,background:"white"}).then(s=>{s&&s.value&&(console.log("update it"),console.log(i),this.util.show(),this.api.post_private("v1/categories/deleteItem",{id:i}).then(c=>{console.log(c),this.util.hide(),c&&c.status&&200==c.status&&this.getAll()}).catch(c=>{console.log(c),this.util.hide(),this.util.apiErrorHandler(c)}))})}updateInfo(i){console.log(i),this.cateId=i.id,this.name=i.name,this.myModal1.show()}editCategory(){if(""==this.name||null==this.name)return this.util.error("Name missing"),!1;const i={id:this.cateId,name:this.name};this.util.show(),this.api.post_private("v1/categories/updateStatus",i).then(s=>{this.util.hide(),console.log("+++++++++++++++",s),s&&s.status&&200==s.status&&s.success&&(this.myModal1.hide(),this.util.success(this.util.translate("Category Updated !")),this.getAll())},s=>{this.util.hide(),console.log("Error",s),this.util.apiErrorHandler(s)}).catch(s=>{this.util.hide(),console.log("Err",s),this.util.apiErrorHandler(s)})}}return l.\u0275fac=function(i){return new(i||l)(t.Y36(A.f),t.Y36(M.s))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-category"]],viewQuery:function(i,s){if(1&i&&(t.Gf(r,5),t.Gf(n,5)),2&i){let c;t.iGM(c=t.CRH())&&(s.myModal1=c.first),t.iGM(c=t.CRH())&&(s.myModal3=c.first)}},decls:67,vars:26,consts:[["type","ball-scale-multiple"],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header"],[1,"card-header-actions"],["type","submit",1,"btn","btn-sm","btn-warning",2,"float","right","margin","0px 5px",3,"click"],["type","submit",1,"btn","btn-sm","btn-success",2,"float","right","margin","0px 5px",3,"click"],[1,"card-body"],[1,"row","flex_row"],["type","text","id","name",1,"form-control",3,"placeholder","input"],["class","error_div",4,"ngIf"],[1,"table","table-responsive-sm","table-hover","mb-0"],[4,"ngIf"],[4,"ngFor","ngForOf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["myModal1","bs-modal"],["role","document",1,"modal-dialog","modal-primary"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","long_content"],[1,"form-group"],[1,"modal_lbl"],["type","text",1,"form-control",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["myModal3","bs-modal"],["role","document",1,"modal-dialog","modal-warning"],[1,"form-group","row"],[1,"col-md-12"],["type","file","id","file-input","name","file-input","accept",".csv",3,"change"],["type","button",1,"btn","btn-warning",2,"float","right",3,"click"],[1,"fa","fa-cloud-download"],["type","button",1,"btn","btn-warning",3,"click"],[1,"error_div"],["count","1","appearance","line"],[3,"color","click"],["color","primary",1,"me-1","badge","bg-info",3,"click"],["color","danger",1,"me-1","badge","bg-danger",3,"click"],["id","pagin1",3,"pageChange"]],template:function(i,s){if(1&i){const c=t.EpF();t._UZ(0,"ngx-spinner",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._uU(6),t.TgZ(7,"div",6)(8,"button",7),t.NdJ("click",function(){return s.importCSV()}),t._uU(9),t.qZA(),t._uU(10," \xa0 "),t.TgZ(11,"button",8),t.NdJ("click",function(){return s.exportCSV()}),t._uU(12),t.qZA()()(),t.TgZ(13,"div",9)(14,"div",10)(15,"div",3)(16,"input",11),t.NdJ("input",function(p){return s.search(p.target.value)}),t.qZA()()(),t.YNc(17,g,3,1,"div",12),t.TgZ(18,"table",13),t.YNc(19,f,10,4,"thead",14),t.TgZ(20,"tbody"),t.YNc(21,w,2,2,"tr",15),t.YNc(22,B,14,9,"tr",15),t.ALo(23,"paginate"),t.qZA()(),t.YNc(24,O,2,0,"div",14),t.qZA()()()()(),t.TgZ(25,"div",16,17)(27,"div",18)(28,"div",19)(29,"div",20)(30,"h5",21),t._uU(31),t.qZA(),t.TgZ(32,"button",22),t.NdJ("click",function(){t.CHM(c);const p=t.MAs(26);return t.KtG(p.hide())}),t.TgZ(33,"span",23),t._uU(34,"\xd7"),t.qZA()()(),t.TgZ(35,"div",24)(36,"div",25)(37,"label",26),t._uU(38),t.qZA(),t.TgZ(39,"input",27),t.NdJ("ngModelChange",function(p){return s.name=p}),t.qZA()()(),t.TgZ(40,"div",28)(41,"button",29),t.NdJ("click",function(){t.CHM(c);const p=t.MAs(26);return t.KtG(p.hide())}),t._uU(42),t.qZA(),t.TgZ(43,"button",30),t.NdJ("click",function(){return s.editCategory()}),t._uU(44),t.qZA()()()()(),t.TgZ(45,"div",16,31)(47,"div",32)(48,"div",19)(49,"div",20)(50,"h5",21),t._uU(51),t.qZA(),t.TgZ(52,"button",22),t.NdJ("click",function(){t.CHM(c);const p=t.MAs(46);return t.KtG(p.hide())}),t.TgZ(53,"span",23),t._uU(54,"\xd7"),t.qZA()()(),t.TgZ(55,"div",24)(56,"div",33)(57,"div",34)(58,"input",35),t.NdJ("change",function(p){return s.uploadCSV(p.target.files)}),t.qZA()()(),t.TgZ(59,"button",36),t.NdJ("click",function(){return s.downloadSample()}),t._uU(60),t._UZ(61,"i",37),t.qZA()(),t.TgZ(62,"div",28)(63,"button",29),t.NdJ("click",function(){t.CHM(c);const p=t.MAs(46);return t.KtG(p.hide())}),t._uU(64),t.qZA(),t.TgZ(65,"button",38),t.NdJ("click",function(){return s.saveType()}),t._uU(66),t.qZA()()()()()}2&i&&(t.xp6(6),t.hij(" ",s.util.translate("All Categories")," "),t.xp6(3),t.hij(" ",s.util.translate("Bulk CSV Upload")," "),t.xp6(3),t.hij(" ",s.util.translate("Export as CSV")," "),t.xp6(4),t.Q6J("placeholder",s.util.translate("Search Category")),t.xp6(1),t.Q6J("ngIf",(null==s.list?null:s.list.length)<=0&&(null==s.dummy?null:s.dummy.length)<=0),t.xp6(2),t.Q6J("ngIf",(null==s.list?null:s.list.length)>0),t.xp6(2),t.Q6J("ngForOf",s.dummy),t.xp6(1),t.Q6J("ngForOf",t.xi3(23,20,s.list,t.VKq(23,E,s.page))),t.xp6(2),t.Q6J("ngIf",(null==s.list?null:s.list.length)>0),t.xp6(7),t.hij("",s.util.translate("Manage Category")," "),t.xp6(7),t.Oqu(s.util.translate("Name")),t.xp6(1),t.Q6J("ngModel",s.name)("placeholder",s.util.translate("Name"))("ngModelOptions",t.DdM(25,I)),t.xp6(3),t.Oqu(s.util.translate("Close")),t.xp6(2),t.hij(" ",s.util.translate("Save Changes"),""),t.xp6(7),t.hij("",s.util.translate("Bulk CSV Upload")," "),t.xp6(9),t.hij(" ",s.util.translate("Download Sample CSV")," \xa0 "),t.xp6(4),t.Oqu(s.util.translate("Close")),t.xp6(2),t.hij(" ",s.util.translate("Save Changes"),""))},dependencies:[a.sg,a.O5,D.oB,T.Fj,T.JJ,T.On,d.Ro,b.LS,e.xr,o.FN3,b._s],styles:['@charset "UTF-8";']}),l})()}];let F=(()=>{class l{}return l.\u0275fac=function(i){return new(i||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[C.Bz.forChild(Z),C.Bz]}),l})();var H=h(9241),N=h(835);let S=(()=>{class l{}return l.\u0275fac=function(i){return new(i||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[a.ez,F,D.zk.forRoot(),T.u5,d.ef,b.JX,e.hx.forRoot({animation:"progress-dark"}),H.P4.forRoot(),N.Fq.forRoot(),o.TXv]}),l})()},835:(R,y,h)=>{h.d(y,{Fq:()=>T});var a=h(1571),C=h(433);const k={provide:C.JU,useExisting:(0,a.Gpc)(()=>x),multi:!0};let x=(()=>{class d{constructor(){this.btnCheckboxTrue=!0,this.btnCheckboxFalse=!1,this.state=!1,this.isDisabled=!1,this.onChange=Function.prototype,this.onTouched=Function.prototype}onClick(){this.isDisabled||(this.toggle(!this.state),this.onChange(this.value))}ngOnInit(){this.toggle(this.trueValue===this.value)}get trueValue(){return!(typeof this.btnCheckboxTrue<"u")||this.btnCheckboxTrue}get falseValue(){return typeof this.btnCheckboxFalse<"u"&&this.btnCheckboxFalse}toggle(e){this.state=e,this.value=this.state?this.trueValue:this.falseValue}writeValue(e){this.state=this.trueValue===e,this.value=e?this.trueValue:this.falseValue}setDisabledState(e){this.isDisabled=e}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}}return d.\u0275fac=function(e){return new(e||d)},d.\u0275dir=a.lG2({type:d,selectors:[["","btnCheckbox",""]],hostVars:3,hostBindings:function(e,o){1&e&&a.NdJ("click",function(){return o.onClick()}),2&e&&(a.uIk("aria-pressed",o.state),a.ekj("active",o.state))},inputs:{btnCheckboxTrue:"btnCheckboxTrue",btnCheckboxFalse:"btnCheckboxFalse"},features:[a._Bn([k])]}),d})();const t={provide:C.JU,useExisting:(0,a.Gpc)(()=>A),multi:!0};let A=(()=>{class d{constructor(e,o,r,n){this.el=e,this.cdr=o,this.renderer=r,this.group=n,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.uncheckable=!1,this.role="radio",this._disabled=!1,this._hasFocus=!1}get value(){return this.group?this.group.value:this._value}set value(e){this.group?this.group.value=e:(this._value=e,this._onChange(e))}get disabled(){return this._disabled}set disabled(e){this.setDisabledState(e)}get controlOrGroupDisabled(){return!!(this.disabled||this.group&&this.group.disabled)||void 0}get hasDisabledClass(){return this.controlOrGroupDisabled&&!this.isActive}get isActive(){return this.btnRadio===this.value}get tabindex(){if(!this.controlOrGroupDisabled)return this.isActive||null==this.group?0:-1}get hasFocus(){return this._hasFocus}toggleIfAllowed(){!this.canToggle()||(this.value=this.uncheckable&&this.btnRadio===this.value?void 0:this.btnRadio)}onSpacePressed(e){this.toggleIfAllowed(),e.preventDefault()}focus(){this.el.nativeElement.focus()}onFocus(){this._hasFocus=!0}onBlur(){this._hasFocus=!1,this.onTouched()}canToggle(){return!this.controlOrGroupDisabled&&(this.uncheckable||this.btnRadio!==this.value)}ngOnChanges(e){"uncheckable"in e&&(this.uncheckable=!1!==this.uncheckable&&typeof this.uncheckable<"u")}_onChange(e){this.group?this.group.value=e:(this.onTouched(),this.onChange(e))}writeValue(e){this.value=e,this.cdr.markForCheck()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._disabled=e,e?this.renderer.setAttribute(this.el.nativeElement,"disabled","disabled"):this.renderer.removeAttribute(this.el.nativeElement,"disabled")}}return d.\u0275fac=function(e){return new(e||d)(a.Y36(a.SBq),a.Y36(a.sBO),a.Y36(a.Qsj),a.Y36((0,a.Gpc)(()=>D),8))},d.\u0275dir=a.lG2({type:d,selectors:[["","btnRadio",""]],hostVars:8,hostBindings:function(e,o){1&e&&a.NdJ("click",function(){return o.toggleIfAllowed()})("keydown.space",function(n){return o.onSpacePressed(n)})("focus",function(){return o.onFocus()})("blur",function(){return o.onBlur()}),2&e&&(a.uIk("aria-disabled",o.controlOrGroupDisabled)("aria-checked",o.isActive)("role",o.role)("tabindex",o.tabindex),a.ekj("disabled",o.hasDisabledClass)("active",o.isActive))},inputs:{btnRadio:"btnRadio",uncheckable:"uncheckable",value:"value",disabled:"disabled"},features:[a._Bn([t]),a.TTD]}),d})();const M={provide:C.JU,useExisting:(0,a.Gpc)(()=>D),multi:!0};let D=(()=>{class d{constructor(e){this.cdr=e,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.role="radiogroup",this._disabled=!1}get value(){return this._value}set value(e){this._value=e,this.onChange(e)}get disabled(){return this._disabled}get tabindex(){return this._disabled?null:0}writeValue(e){this._value=e,this.cdr.markForCheck()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.radioButtons&&(this._disabled=e,this.radioButtons.forEach(o=>{o.setDisabledState(e)}),this.cdr.markForCheck())}onFocus(){if(this._disabled)return;const e=this.getActiveOrFocusedRadio();if(e)e.focus();else if(this.radioButtons){const o=this.radioButtons.find(r=>!r.disabled);o&&o.focus()}}onBlur(){this.onTouched&&this.onTouched()}selectNext(e){this.selectInDirection("next"),e.preventDefault()}selectPrevious(e){this.selectInDirection("previous"),e.preventDefault()}selectInDirection(e){if(this._disabled)return;function o(n,g){let v=(n+("next"===e?1:-1))%g.length;return v<0&&(v=g.length-1),v}const r=this.getActiveOrFocusedRadio();if(r&&this.radioButtons){const n=this.radioButtons.toArray(),g=n.indexOf(r);for(let f=o(g,n);f!==g;f=o(f,n))if(n[f].canToggle()){n[f].toggleIfAllowed(),n[f].focus();break}}}getActiveOrFocusedRadio(){if(this.radioButtons)return this.radioButtons.find(e=>e.isActive)||this.radioButtons.find(e=>e.hasFocus)}}return d.\u0275fac=function(e){return new(e||d)(a.Y36(a.sBO))},d.\u0275dir=a.lG2({type:d,selectors:[["","btnRadioGroup",""]],contentQueries:function(e,o,r){if(1&e&&a.Suo(r,A,4),2&e){let n;a.iGM(n=a.CRH())&&(o.radioButtons=n)}},hostVars:2,hostBindings:function(e,o){1&e&&a.NdJ("focus",function(){return o.onFocus()})("blur",function(){return o.onBlur()})("keydown.ArrowRight",function(n){return o.selectNext(n)})("keydown.ArrowDown",function(n){return o.selectNext(n)})("keydown.ArrowLeft",function(n){return o.selectPrevious(n)})("keydown.ArrowUp",function(n){return o.selectPrevious(n)}),2&e&&a.uIk("role",o.role)("tabindex",o.tabindex)},features:[a._Bn([M])]}),d})(),T=(()=>{class d{static forRoot(){return{ngModule:d,providers:[]}}}return d.\u0275fac=function(e){return new(e||d)},d.\u0275mod=a.oAB({type:d}),d.\u0275inj=a.cJS({}),d})()},9241:(R,y,h)=>{h.d(y,{P4:()=>e});var a=h(1571),C=h(6895);let e=(()=>{class o{static forRoot(){return{ngModule:o,providers:[]}}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=a.oAB({type:o}),o.\u0275inj=a.cJS({imports:[C.ez]}),o})()}}]);