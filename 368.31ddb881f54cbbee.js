"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[368],{2368:(P,h,l)=>{l.r(h),l.d(h,{ForgotModule:()=>O});var p=l(6895),g=l(7136),t=l(1571),f=l(5830),_=l(7241),n=l(4980),d=l(1334),u=l(433),m=l(8423);const c=function(){return{standalone:!0}};function T(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"c-input-group",11)(1,"span",12),t.O4$(),t._UZ(2,"svg",13),t.qZA(),t.kcU(),t.TgZ(3,"input",14),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.email=i)}),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(3),t.Tol(1==e.submited&&""==e.email?"validator_error":""),t.Q6J("placeholder",e.util.translate("Email"))("ngModel",e.email)("ngModelOptions",t.DdM(5,c))}}function x(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"c-input-group",15)(1,"span",12),t.O4$(),t._UZ(2,"svg",16),t.qZA(),t.kcU(),t.TgZ(3,"input",17),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.otp=i)}),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(3),t.Tol(1==e.submited&&""==e.otp?"validator_error":""),t.Q6J("placeholder",e.util.translate("Please enter OTP"))("ngModel",e.otp)("ngModelOptions",t.DdM(5,c))}}function F(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"c-input-group",15)(1,"span",12),t.O4$(),t._UZ(2,"svg",16),t.qZA(),t.kcU(),t.TgZ(3,"input",17),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.password=i)}),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(3),t.Tol(1==e.submited&&""==e.password?"validator_error":""),t.Q6J("placeholder",e.util.translate("Password"))("ngModel",e.password)("ngModelOptions",t.DdM(5,c))}}function C(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"c-input-group",15)(1,"span",12),t.O4$(),t._UZ(2,"svg",16),t.qZA(),t.kcU(),t.TgZ(3,"input",17),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.confirm=i)}),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(3),t.Tol(1==e.submited&&""==e.confirm?"validator_error":""),t.Q6J("placeholder",e.util.translate("Confirm Password"))("ngModel",e.confirm)("ngModelOptions",t.DdM(5,c))}}function w(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.goToTabs())}),t._uU(1),t.qZA()}if(2&s){const e=t.oxw();t.xp6(1),t.hij(" ",e.util.translate("Send OTP")," ")}}function M(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onOTP())}),t._uU(1),t.qZA()}if(2&s){const e=t.oxw();t.xp6(1),t.hij(" ",e.util.translate("Verify OTP")," ")}}function v(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.updatePassword())}),t._uU(1),t.qZA()}if(2&s){const e=t.oxw();t.xp6(1),t.hij(" ",e.util.translate("Update Password")," ")}}const Z=[{path:"",component:(()=>{class s{constructor(e,o,i){this.api=e,this.util=o,this.location=i,this.email="",this.otp="",this.password="",this.confirm="",this.div=1,this.submited=!1,this.temp=""}ngOnInit(){}goToTabs(){if(this.submited=!0,!/^[\w._-]+[+]?[\w._-]+@[\w.-]+\.[a-zA-Z]{2,6}$/.test(this.email))return this.util.error(this.util.translate("Please enter valid email")),!1;console.log("login");const o={email:this.email,subject:this.util.translate("Reset Password"),header_text:this.util.translate("Use this code to reset your password"),thank_you_text:this.util.translate("Don't share this OTP to anybody else"),mediaURL:this.api.imageUrl};this.util.show(),this.api.post("v1/auth/verifyEmailForReset",o).then(i=>{this.util.hide(),console.log(i),i&&i.status&&200==i.status&&i.data&&1==i.data&&i.otp_id?(this.otp_id=i.otp_id,this.submited=!1,this.div=2):this.util.error(this.util.translate("This email is not exist"))},i=>(this.util.hide(),console.log(i),i&&401==i.status&&i.error.error||i&&500==i.status&&i.error.error?(this.util.error(i.error.error),!1):void this.util.error(this.util.translate("Something went wrong")))).catch(i=>(this.util.hide(),console.log(i),i&&401==i.status&&i.error.error||i&&500==i.status&&i.error.error?(this.util.error(i.error.error),!1):(this.util.hide(),void this.util.error(this.util.translate("Something went wrong")))))}onOTP(){if(""==this.otp||!this.otp)return this.util.error(this.util.translate("Please enter OTP")),!1;this.util.show();const e={id:this.otp_id,otp:this.otp,email:this.email};this.submited=!0,this.api.post("v1/otp/verifyOTPReset",e).then(o=>{console.log(o),this.util.hide(),o&&o.status&&200==o.status&&o.data&&(this.submited=!1,this.div=3,this.temp=o.temp)},o=>(this.util.hide(),console.log(o),o&&401==o.status&&o.error.error||o&&500==o.status&&o.error.error?(this.util.error(o.error.error),!1):(this.util.hide(),void this.util.error(this.util.translate("Wrong OTP"))))).catch(o=>(this.util.hide(),console.log(o),o&&401==o.status&&o.error.error||o&&500==o.status&&o.error.error?(this.util.error(o.error.error),!1):(this.util.hide(),void this.util.error(this.util.translate("Wrong OTP")))))}onOtpChange(e){console.log(e),this.otp=e}goToBack(){this.location.back()}updatePassword(){if(this.password!=this.confirm)return this.util.error(this.util.translate("Password does not match")),!1;this.util.show(),this.api.postTemp("v1/password/updateUserPasswordWithEmail",{id:this.otp_id,email:this.email,password:this.password},this.temp).then(o=>{console.log(o),this.util.hide(),o&&o.status&&200==o.status&&o.data&&(this.util.success(this.util.translate("Password Updated")),this.goToBack())},o=>(this.util.hide(),console.log(o),o&&401==o.status&&o.error.error||o&&500==o.status&&o.error.error?(this.util.error(o.error.error),!1):(this.util.hide(),void this.util.error(this.util.translate("Wrong OTP"))))).catch(o=>(this.util.hide(),console.log(o),o&&401==o.status&&o.error.error||o&&500==o.status&&o.error.error?(this.util.error(o.error.error),!1):(this.util.hide(),void this.util.error(this.util.translate("Wrong OTP")))))}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(f.s),t.Y36(_.f),t.Y36(p.Ye))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-forgot"]],decls:22,vars:9,consts:[["type","ball-scale-multiple"],[1,"bg-light","min-vh-100","d-flex","flex-row","align-items-center"],[1,"justify-content-center"],["md","5"],[1,"p-4"],["cForm",""],[1,"text-medium-emphasis"],["class","mb-3",4,"ngIf"],["class","mb-4",4,"ngIf"],["xs","12"],["cButton","","class","px-4","color","primary",3,"click",4,"ngIf"],[1,"mb-3"],["cInputGroupText",""],["cIcon","","name","cilUser"],["cFormControl","","type","email",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],[1,"mb-4"],["cIcon","","name","cilLockLocked"],["cFormControl","","type","text",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],["cButton","","color","primary",1,"px-4",3,"click"]],template:function(e,o){1&e&&(t._UZ(0,"ngx-spinner",0),t.TgZ(1,"div",1)(2,"c-container")(3,"c-row",2)(4,"c-col",3)(5,"c-card-group")(6,"c-card",4)(7,"c-card-body")(8,"form",5)(9,"h1"),t._uU(10),t.qZA(),t.TgZ(11,"p",6),t._uU(12),t.qZA(),t.YNc(13,T,4,6,"c-input-group",7),t.YNc(14,x,4,6,"c-input-group",8),t.YNc(15,F,4,6,"c-input-group",8),t.YNc(16,C,4,6,"c-input-group",8),t.TgZ(17,"c-row")(18,"c-col",9),t.YNc(19,w,2,1,"button",10),t.YNc(20,M,2,1,"button",10),t.YNc(21,v,2,1,"button",10),t.qZA()()()()()()()()()()),2&e&&(t.xp6(10),t.Oqu(o.util.translate("Reset Password")),t.xp6(2),t.hij("",o.util.translate("Enter your credentials")," "),t.xp6(1),t.Q6J("ngIf",1==o.div),t.xp6(1),t.Q6J("ngIf",2==o.div),t.xp6(1),t.Q6J("ngIf",3==o.div),t.xp6(1),t.Q6J("ngIf",3==o.div),t.xp6(3),t.Q6J("ngIf",1==o.div),t.xp6(1),t.Q6J("ngIf",2==o.div),t.xp6(1),t.Q6J("ngIf",3==o.div))},dependencies:[p.O5,n.AkF,n.yue,n.RMw,n.Hq3,n.e$z,n.iok,n.Yp0,d.ar,n.$_X,n.oHf,n.g8K,n.jOm,u._Y,u.Fj,u.JJ,u.JL,u.On,u.F,m.Ro],styles:['@charset "UTF-8";']}),s})()}];let b=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[g.Bz.forChild(Z),g.Bz]}),s})(),O=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[p.ez,b,n.dTQ,n.hJ1,n.zE6,d.QX,n.ejP,u.u5,m.ef]}),s})()}}]);