"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[285],{4949:(R,C,u)=>{u.r(C),u.d(C,{OrdersModule:()=>U});var a=u(6895),T=u(7136),D=u(5439),e=u(1571),w=u(7241),O=u(5830),k=u(388),y=u(8423),x=u(4333),c=u(502),b=u(4980);const t=["myModal3"];function s(o,g){if(1&o&&(e.TgZ(0,"div",33)(1,"label"),e._uU(2),e.qZA()()),2&o){const i=e.oxw();e.xp6(2),e.Oqu(i.util.translate("No Data Found.."))}}function l(o,g){if(1&o&&(e.TgZ(0,"thead")(1,"tr")(2,"th"),e._uU(3),e.qZA(),e.TgZ(4,"th"),e._uU(5),e.qZA(),e.TgZ(6,"th"),e._uU(7),e.qZA(),e.TgZ(8,"th"),e._uU(9),e.qZA(),e.TgZ(10,"th"),e._uU(11),e.qZA(),e.TgZ(12,"th"),e._uU(13),e.qZA(),e.TgZ(14,"th"),e._uU(15),e.qZA(),e.TgZ(16,"th"),e._uU(17),e.qZA(),e.TgZ(18,"th"),e._uU(19),e.qZA()()()),2&o){const i=e.oxw();e.xp6(3),e.Oqu(i.util.translate("ID")),e.xp6(2),e.Oqu(i.util.translate("User")),e.xp6(2),e.Oqu(i.util.translate("User Name")),e.xp6(2),e.Oqu(i.util.translate("Store")),e.xp6(2),e.Oqu(i.util.translate("Ordered on")),e.xp6(2),e.Oqu(i.util.translate("Total")),e.xp6(2),e.Oqu(i.util.translate("Quantity")),e.xp6(2),e.Oqu(i.util.translate("Status")),e.xp6(2),e.Oqu(i.util.translate("Actions"))}}function n(o,g){1&o&&(e.TgZ(0,"td"),e._UZ(1,"ngx-skeleton-loader",34),e.qZA())}const h=function(){return[1,2,3,4,5,6,7,8]};function p(o,g){1&o&&(e.TgZ(0,"tr"),e.YNc(1,n,2,0,"td",15),e.qZA()),2&o&&(e.xp6(1),e.Q6J("ngForOf",e.DdM(1,h)))}function f(o,g){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const i=e.oxw().$implicit,r=e.oxw();e.xp6(1),e.AsE("",r.util.appSettings.currencySymbol," ",i.grand_total,"")}}function _(o,g){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const i=e.oxw().$implicit,r=e.oxw();e.xp6(1),e.AsE("",i.grand_total," ",r.util.appSettings.currencySymbol,"")}}function A(o,g){if(1&o){const i=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"img",35),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e.YNc(12,f,2,2,"span",14),e.YNc(13,_,2,2,"span",14),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td")(19,"c-badge",36),e.NdJ("click",function(){const v=e.CHM(i).$implicit,m=e.oxw();return e.KtG(m.openOrder(v))}),e._uU(20),e.qZA()()()}if(2&o){const i=g.$implicit,r=e.oxw();e.xp6(2),e.Oqu(i.id),e.xp6(2),e.Q6J("src",r.api.imageUrl+i.user_cover,e.LSH),e.xp6(2),e.AsE("",i.first_name," ",i.last_name,""),e.xp6(2),e.hij(" from ",i.store_name," "),e.xp6(2),e.Oqu(r.getDates(i.time)),e.xp6(2),e.Q6J("ngIf","left"==r.util.appSettings.currencySide),e.xp6(1),e.Q6J("ngIf","right"==r.util.appSettings.currencySide),e.xp6(2),e.Oqu(i.orders.length),e.xp6(2),e.Oqu(r.util.translate(i.status)),e.xp6(3),e.hij(" ",r.util.translate("View")," ")}}function B(o,g){if(1&o){const i=e.EpF();e.TgZ(0,"div")(1,"pagination-controls",37),e.NdJ("pageChange",function(d){e.CHM(i);const v=e.oxw();return e.KtG(v.page=d)}),e.qZA()()}}const Z=function(o){return{id:"pagin1",itemsPerPage:10,currentPage:o}},M=[{path:"",component:(()=>{class o{constructor(i,r,d){this.util=i,this.api=r,this.router=d,this.orders=[],this.dummOrders=[],this.dummy=Array(5),this.page=1,this.resetChanges=()=>{this.orders=this.dummOrders},this.getOrders()}ngOnInit(){}getOrders(){this.dummOrders=[],this.orders=[],this.dummy=Array(5),this.api.get_private("v1/orders/allOrders").then(i=>{if(console.log(i),this.dummy=[],i&&i.status&&200==i.status&&i.data){const r=i.data;r.forEach(d=>{(v=>{try{return JSON.parse(v),!0}catch{return!1}})(d.orders)&&(d.orders=JSON.parse(d.orders))}),this.orders=r,this.dummOrders=this.orders}}).catch(i=>{console.log(i),this.dummy=[],this.util.apiErrorHandler(i)})}search(i){this.resetChanges(),console.log("string",i),this.orders=this.filterItems(i)}setFilteredItems(){console.log("clear"),this.orders=[],this.orders=this.dummOrders}filterItems(i){return this.orders.filter(r=>r.id==i)}getDates(i){return D(i).format("llll")}importCSV(){this.myModal3.show()}exportCSV(){let i=[];this.orders.forEach(d=>{const v={id:this.util.replaceWithDot(d.id),address:this.util.replaceWithDot(d.address),applied_coupon:this.util.replaceWithDot(d.applied_coupon),coupon_id:this.util.replaceWithDot(d.coupon_id),did:this.util.replaceWithDot(d.did),delivery_charge:this.util.replaceWithDot(d.delivery_charge),discount:this.util.replaceWithDot(d.discount),grand_total:this.util.replaceWithDot(d.grand_total),orders:this.util.replaceWithDot(d.orders),paid:this.util.replaceWithDot(d.paid),pay_method:this.util.replaceWithDot(d.pay_method),restId:this.util.replaceWithDot(d.restId),serviceTax:this.util.replaceWithDot(d.serviceTax),time:this.util.replaceWithDot(d.time),total:this.util.replaceWithDot(d.total),uid:this.util.replaceWithDot(d.uid),notes:this.util.replaceWithDot(d.notes),status:this.util.replaceWithDot(d.status)};i.push(v)}),this.util.downloadFile(i,"orders",["id","address","applied_coupon","coupon_id","did","delivery_charge","discount","grand_total","orders","paid","pay_method","restId","serviceTax","time","total","uid","notes","status"])}uploadCSV(i){console.log("fle",i),0!=i.length&&null!=i[0].type.match(/text\/*/)&&(i?(console.log("ok"),this.util.show(),this.api.uploaCSV(i,"v1/orders/importData").subscribe(d=>{console.log("==>>>>>>",d.data),this.util.hide(),this.myModal3.hide(),this.util.success("Uploaded"),this.getOrders()},d=>{console.log(d),this.util.hide(),this.util.apiErrorHandler(d)})):console.log("no"))}downloadSample(){window.open("assets/sample/orders.csv","_blank")}saveType(){this.myModal3.hide()}openOrder(i){console.log(i),this.router.navigate(["manage-orders"],{queryParams:{id:i.id}})}}return o.\u0275fac=function(i){return new(i||o)(e.Y36(w.f),e.Y36(O.s),e.Y36(T.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-orders"]],viewQuery:function(i,r){if(1&i&&e.Gf(t,5),2&i){let d;e.iGM(d=e.CRH())&&(r.myModal3=d.first)}},decls:47,vars:18,consts:[["type","ball-scale-multiple"],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header"],[1,"card-header-actions"],["type","submit",1,"btn","btn-sm","btn-warning",2,"float","right","margin","0px 5px",3,"click"],["type","submit",1,"btn","btn-sm","btn-success",2,"float","right","margin","0px 5px",3,"click"],[1,"card-body"],[1,"row","flex_row"],["type","text","id","name",1,"form-control",3,"placeholder","input"],["class","error_div",4,"ngIf"],[1,"table","table-striped"],[4,"ngIf"],[4,"ngFor","ngForOf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["myModal3","bs-modal"],["role","document",1,"modal-dialog","modal-warning"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","long_content"],[1,"form-group","row"],[1,"col-md-12"],["type","file","id","file-input","name","file-input","accept",".csv",3,"change"],["type","button",1,"btn","btn-warning",2,"float","right",3,"click"],[1,"fa","fa-cloud-download"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-warning",3,"click"],[1,"error_div"],["count","1","appearance","line"],["onError","this.src='assets/img/dummy.jpeg'",1,"img-responsive",2,"height","20px","width","20px","object-fit","cover",3,"src"],["color","primary",1,"me-1","badge","bg-info",3,"click"],["id","pagin1",3,"pageChange"]],template:function(i,r){if(1&i){const d=e.EpF();e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._uU(6),e.TgZ(7,"div",6)(8,"button",7),e.NdJ("click",function(){return r.importCSV()}),e._uU(9),e.qZA(),e._uU(10," \xa0 "),e.TgZ(11,"button",8),e.NdJ("click",function(){return r.exportCSV()}),e._uU(12),e.qZA()()(),e.TgZ(13,"div",9)(14,"div",10)(15,"div",3)(16,"input",11),e.NdJ("input",function(m){return r.search(m.target.value)}),e.qZA()()(),e.YNc(17,s,3,1,"div",12),e.TgZ(18,"table",13),e.YNc(19,l,20,9,"thead",14),e.TgZ(20,"tbody"),e.YNc(21,p,2,2,"tr",15),e.YNc(22,A,21,11,"tr",15),e.ALo(23,"paginate"),e.qZA()(),e.YNc(24,B,2,0,"div",14),e.qZA()()()()(),e.TgZ(25,"div",16,17)(27,"div",18)(28,"div",19)(29,"div",20)(30,"h5",21),e._uU(31),e.qZA(),e.TgZ(32,"button",22),e.NdJ("click",function(){e.CHM(d);const m=e.MAs(26);return e.KtG(m.hide())}),e.TgZ(33,"span",23),e._uU(34,"\xd7"),e.qZA()()(),e.TgZ(35,"div",24)(36,"div",25)(37,"div",26)(38,"input",27),e.NdJ("change",function(m){return r.uploadCSV(m.target.files)}),e.qZA()()(),e.TgZ(39,"button",28),e.NdJ("click",function(){return r.downloadSample()}),e._uU(40),e._UZ(41,"i",29),e.qZA()(),e.TgZ(42,"div",30)(43,"button",31),e.NdJ("click",function(){e.CHM(d);const m=e.MAs(26);return e.KtG(m.hide())}),e._uU(44),e.qZA(),e.TgZ(45,"button",32),e.NdJ("click",function(){return r.saveType()}),e._uU(46),e.qZA()()()()()}2&i&&(e.xp6(6),e.hij(" ",r.util.translate("All Orders")," "),e.xp6(3),e.hij(" ",r.util.translate("Bulk CSV Upload")," "),e.xp6(3),e.hij(" ",r.util.translate("Export as CSV")," "),e.xp6(4),e.Q6J("placeholder",r.util.translate("Search Order By Id")),e.xp6(1),e.Q6J("ngIf",(null==r.orders?null:r.orders.length)<=0&&(null==r.dummy?null:r.dummy.length)<=0),e.xp6(2),e.Q6J("ngIf",null==r.orders?null:r.orders.length),e.xp6(2),e.Q6J("ngForOf",r.dummy),e.xp6(1),e.Q6J("ngForOf",e.xi3(23,13,r.orders,e.VKq(16,Z,r.page))),e.xp6(2),e.Q6J("ngIf",(null==r.orders?null:r.orders.length)>0),e.xp6(7),e.hij("",r.util.translate("Bulk CSV Upload")," "),e.xp6(9),e.hij(" ",r.util.translate("Download Sample CSV")," \xa0 "),e.xp6(4),e.Oqu(r.util.translate("Close")),e.xp6(2),e.hij(" ",r.util.translate("Save Changes"),""))},dependencies:[a.sg,a.O5,k.oB,y.Ro,x.LS,c.xr,b.FN3,x._s],styles:['@charset "UTF-8";']}),o})()}];let I=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[T.Bz.forChild(M),T.Bz]}),o})();var E=u(433),F=u(9241),S=u(835);let U=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[a.ez,I,k.zk.forRoot(),E.u5,y.ef,x.JX,c.hx.forRoot({animation:"progress-dark"}),F.P4.forRoot(),S.Fq.forRoot(),b.TXv]}),o})()},835:(R,C,u)=>{u.d(C,{Fq:()=>x});var a=u(1571),T=u(433);const D={provide:T.JU,useExisting:(0,a.Gpc)(()=>e),multi:!0};let e=(()=>{class c{constructor(){this.btnCheckboxTrue=!0,this.btnCheckboxFalse=!1,this.state=!1,this.isDisabled=!1,this.onChange=Function.prototype,this.onTouched=Function.prototype}onClick(){this.isDisabled||(this.toggle(!this.state),this.onChange(this.value))}ngOnInit(){this.toggle(this.trueValue===this.value)}get trueValue(){return!(typeof this.btnCheckboxTrue<"u")||this.btnCheckboxTrue}get falseValue(){return typeof this.btnCheckboxFalse<"u"&&this.btnCheckboxFalse}toggle(t){this.state=t,this.value=this.state?this.trueValue:this.falseValue}writeValue(t){this.state=this.trueValue===t,this.value=t?this.trueValue:this.falseValue}setDisabledState(t){this.isDisabled=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}}return c.\u0275fac=function(t){return new(t||c)},c.\u0275dir=a.lG2({type:c,selectors:[["","btnCheckbox",""]],hostVars:3,hostBindings:function(t,s){1&t&&a.NdJ("click",function(){return s.onClick()}),2&t&&(a.uIk("aria-pressed",s.state),a.ekj("active",s.state))},inputs:{btnCheckboxTrue:"btnCheckboxTrue",btnCheckboxFalse:"btnCheckboxFalse"},features:[a._Bn([D])]}),c})();const w={provide:T.JU,useExisting:(0,a.Gpc)(()=>O),multi:!0};let O=(()=>{class c{constructor(t,s,l,n){this.el=t,this.cdr=s,this.renderer=l,this.group=n,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.uncheckable=!1,this.role="radio",this._disabled=!1,this._hasFocus=!1}get value(){return this.group?this.group.value:this._value}set value(t){this.group?this.group.value=t:(this._value=t,this._onChange(t))}get disabled(){return this._disabled}set disabled(t){this.setDisabledState(t)}get controlOrGroupDisabled(){return!!(this.disabled||this.group&&this.group.disabled)||void 0}get hasDisabledClass(){return this.controlOrGroupDisabled&&!this.isActive}get isActive(){return this.btnRadio===this.value}get tabindex(){if(!this.controlOrGroupDisabled)return this.isActive||null==this.group?0:-1}get hasFocus(){return this._hasFocus}toggleIfAllowed(){!this.canToggle()||(this.value=this.uncheckable&&this.btnRadio===this.value?void 0:this.btnRadio)}onSpacePressed(t){this.toggleIfAllowed(),t.preventDefault()}focus(){this.el.nativeElement.focus()}onFocus(){this._hasFocus=!0}onBlur(){this._hasFocus=!1,this.onTouched()}canToggle(){return!this.controlOrGroupDisabled&&(this.uncheckable||this.btnRadio!==this.value)}ngOnChanges(t){"uncheckable"in t&&(this.uncheckable=!1!==this.uncheckable&&typeof this.uncheckable<"u")}_onChange(t){this.group?this.group.value=t:(this.onTouched(),this.onChange(t))}writeValue(t){this.value=t,this.cdr.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._disabled=t,t?this.renderer.setAttribute(this.el.nativeElement,"disabled","disabled"):this.renderer.removeAttribute(this.el.nativeElement,"disabled")}}return c.\u0275fac=function(t){return new(t||c)(a.Y36(a.SBq),a.Y36(a.sBO),a.Y36(a.Qsj),a.Y36((0,a.Gpc)(()=>y),8))},c.\u0275dir=a.lG2({type:c,selectors:[["","btnRadio",""]],hostVars:8,hostBindings:function(t,s){1&t&&a.NdJ("click",function(){return s.toggleIfAllowed()})("keydown.space",function(n){return s.onSpacePressed(n)})("focus",function(){return s.onFocus()})("blur",function(){return s.onBlur()}),2&t&&(a.uIk("aria-disabled",s.controlOrGroupDisabled)("aria-checked",s.isActive)("role",s.role)("tabindex",s.tabindex),a.ekj("disabled",s.hasDisabledClass)("active",s.isActive))},inputs:{btnRadio:"btnRadio",uncheckable:"uncheckable",value:"value",disabled:"disabled"},features:[a._Bn([w]),a.TTD]}),c})();const k={provide:T.JU,useExisting:(0,a.Gpc)(()=>y),multi:!0};let y=(()=>{class c{constructor(t){this.cdr=t,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.role="radiogroup",this._disabled=!1}get value(){return this._value}set value(t){this._value=t,this.onChange(t)}get disabled(){return this._disabled}get tabindex(){return this._disabled?null:0}writeValue(t){this._value=t,this.cdr.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.radioButtons&&(this._disabled=t,this.radioButtons.forEach(s=>{s.setDisabledState(t)}),this.cdr.markForCheck())}onFocus(){if(this._disabled)return;const t=this.getActiveOrFocusedRadio();if(t)t.focus();else if(this.radioButtons){const s=this.radioButtons.find(l=>!l.disabled);s&&s.focus()}}onBlur(){this.onTouched&&this.onTouched()}selectNext(t){this.selectInDirection("next"),t.preventDefault()}selectPrevious(t){this.selectInDirection("previous"),t.preventDefault()}selectInDirection(t){if(this._disabled)return;function s(n,h){let f=(n+("next"===t?1:-1))%h.length;return f<0&&(f=h.length-1),f}const l=this.getActiveOrFocusedRadio();if(l&&this.radioButtons){const n=this.radioButtons.toArray(),h=n.indexOf(l);for(let p=s(h,n);p!==h;p=s(p,n))if(n[p].canToggle()){n[p].toggleIfAllowed(),n[p].focus();break}}}getActiveOrFocusedRadio(){if(this.radioButtons)return this.radioButtons.find(t=>t.isActive)||this.radioButtons.find(t=>t.hasFocus)}}return c.\u0275fac=function(t){return new(t||c)(a.Y36(a.sBO))},c.\u0275dir=a.lG2({type:c,selectors:[["","btnRadioGroup",""]],contentQueries:function(t,s,l){if(1&t&&a.Suo(l,O,4),2&t){let n;a.iGM(n=a.CRH())&&(s.radioButtons=n)}},hostVars:2,hostBindings:function(t,s){1&t&&a.NdJ("focus",function(){return s.onFocus()})("blur",function(){return s.onBlur()})("keydown.ArrowRight",function(n){return s.selectNext(n)})("keydown.ArrowDown",function(n){return s.selectNext(n)})("keydown.ArrowLeft",function(n){return s.selectPrevious(n)})("keydown.ArrowUp",function(n){return s.selectPrevious(n)}),2&t&&a.uIk("role",s.role)("tabindex",s.tabindex)},features:[a._Bn([k])]}),c})(),x=(()=>{class c{static forRoot(){return{ngModule:c,providers:[]}}}return c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=a.oAB({type:c}),c.\u0275inj=a.cJS({}),c})()},9241:(R,C,u)=>{u.d(C,{P4:()=>t});var a=u(1571),T=u(6895);let t=(()=>{class s{static forRoot(){return{ngModule:s,providers:[]}}}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=a.oAB({type:s}),s.\u0275inj=a.cJS({imports:[T.ez]}),s})()}}]);